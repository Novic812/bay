# dont touch $1 or $BASH_REMATCH or $REPLY
if [ -d .git ]
then
  # config
  read -d, aa <.git/config
  bb='filemode = true'
  if [[ $aa =~ $bb ]]
  then
    git config core.filemode false
  fi
  # HEAD
  read aa <.git/HEAD
  if [[ $aa < g ]]
  then
    aa=${aa::7}
  else
    aa=${aa/*\/}
  fi
  aa="($aa)"
fi

PS1="\e];$TERM\a
\e[32m\u@\h \e[33m\w $aa\e[m
$ "

unset aa bb
