# dont touch $1 or $BASH_REMATCH or $REPLY or $k
if [ -d .git ]
then
  # config
  read -d, q <.git/config
  if [[ $q =~ filemode.=.true ]]
  then
    git config core.filemode false
  fi
  # HEAD
  read q <.git/HEAD
  if [[ $q < g ]]
  then
    q=${q::7}
  else
    q=${q/*\/}
  fi
  q="($q)"
fi

PS1="\e];$TERM\a
\e[32m\u@\h \e[33m\w $q\e[m
$ "

unset q
