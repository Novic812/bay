# dont touch $1 or $BASH_REMATCH or $REPLY
if [ -d .git ]
then
  read -d, ee <.git/config
  ff='filemode = true'
  if [[ $ee =~ $ff ]]
  then
    # NTFS is an unfortunate filesystem
    git config core.filemode false
  fi
  read ee <.git/HEAD
  if [[ $ee < g ]]
  then
    ee=${ee::7}
  else
    ee=${ee/*\/}
  fi
fi

PS1="\e];${SHELL##*/}\a
\e[33m\w \e[36m$ee\e[m
# "

unset ee ff
