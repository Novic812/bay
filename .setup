# must run a single time to avoid repeated downloading of setup.ini

pk=(
  wget    # 17 occurances
  make    # 12 occurances
  curl    # 9 occurances
  unzip   # 3 occurances
  zip     # 3 occurances
  openssh # git push
)

setup -nqP `IFS=,; echo "${pk[*]}"`

# cygwin.com/ml/cygwin/2013-06/msg00489.html
if curl -sz 20120214 box-soft.com/release/git/md5.sum | read
then
  echo "echo 'new git available; fix $0'" >> ~/.bash_profile
else
  wget downloads.sf.net/cygwin-ports/git-1.8.3.1-1.tar.bz2
  tar xf git-1.8.3.1-1.tar.bz2 -C/
fi

# cygwin.com/ml/cygwin/2013-06/msg00163.html
if curl -sz 20130630 box-soft.com/release/cygwin/md5.sum | read
then
  echo "echo 'new cygwin available; fix $0'" >> ~/.bash_profile
else
  wget cygwin.org/snapshots/cygwin1-20130608.dll.bz2
  bunzip2 cygwin1-20130608.dll.bz2
  install cygwin1-20130608.dll /bin/cygwin1.dll
  kill -7 $PPID
fi
