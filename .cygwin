## ## ## ## ## ## GitHub highlight hack

# set up Notepad2
set -- -f -t reg_expand_sz -d '"%programfiles%/notepad2/notepad2" %1'

reg add 'hkcr\FirefoxHTML\shell\edit\command' "$@"
reg add 'hkcr\batfile\shell\edit\command' "$@"
reg add 'hkcr\cmdfile\shell\edit\command' "$@"
reg add 'hkcr\cssfile\shell\edit\command' "$@"
reg add 'hkcr\inifile\shell\open\command' "$@"
reg add 'hkcr\jsfile\shell\edit\command' "$@"
reg add 'hkcr\regfile\shell\edit\command' "$@"
reg add 'hkcr\txtfile\shell\open\command' "$@"
reg add 'hkcr\unknown\shell\edit\command' "$@"
reg add 'hkcr\xmlfile\shell\edit\command' "$@"

reg add 'hkcr\.htm' -f -d FirefoxURL
reg add 'hkcr\unknown\shell' -f -d edit
reg add 'hkcr\xmlfile\shell' -f -d edit

# VLC option for folders
set -- -f -t reg_expand_sz -d '"%programfiles(x86)%/videolan/vlc/vlc" "%1"'

reg add 'hkcr\directory\shell\VLC\command' "$@"

# you must load /etc/profile the first time, can disable after that
set -- -f -d 'cmd /c cd %v & start %homedrive%/cygwin/bin/bash -l'

reg add 'hkcr\directory\background\shell\bash\command' -t reg_expand_sz "$@"
reg add 'hkcr\directory\shell\bash\command' -t reg_expand_sz "$@"

# console
# hex values are HHHHWWWW or XXXXYYYY
set -- -f -t reg_dword
reg add 'hkcu\console' -v QuickEdit -d 1 "$@"
reg add 'hkcu\console' -v WindowPosition -d 0x01900384 "$@"
reg add 'hkcu\console' -v WindowSize -d 0x00190050 "$@"
reg add 'hkcu\console' -v ScreenBufferSize -d 0x07d00050 "$@"

# do not run bash in compatibility mode
set 'hkcu\software\microsoft\windows nt\CurrentVersion\AppCompatFlags'
reg add "$1" /f
reg delete "$1" /f

# Mount HOMEDRIVE
cat > /etc/fstab <<aa
- / cygdrive acl
$HOMEDRIVE/opt /opt . acl
$HOMEDRIVE/$USERNAME/Desktop /home/$USERNAME/Desktop . acl
aa
